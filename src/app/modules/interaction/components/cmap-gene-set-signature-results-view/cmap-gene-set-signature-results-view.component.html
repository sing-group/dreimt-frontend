<div *ngIf="!isMetadataAvailable() && !isError()">
  <p>Loading results...</p>
  <mat-spinner diameter="100"></mat-spinner>
</div>

<div *ngIf="isError()">
  <p>{{errorMessage}}</p>
</div>

<div *ngIf="isMetadataAvailable()">
  <mat-card>
    <mat-card-header>
      <mat-card-title *ngIf="!isMetadataAvailable()">Cmap results</mat-card-title>
      <mat-card-title *ngIf="isMetadataAvailable()">{{metadata.queryTitle}}</mat-card-title>
      <mat-card-subtitle>{{metadata.id}}
        <button mat-icon-button ngxClipboard [cbContent]="getResultsUrl()"
                matTooltip="Copy the results URL to the clipboard">
          <mat-icon aria-label="Copy the results URL to the clipboard">
            link
          </mat-icon>
        </button>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <mat-expansion-panel *ngIf="isMetadataAvailable()">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Query parameters
          </mat-panel-title>
        </mat-expansion-panel-header>

        <mat-list>
          <mat-list-item> Query geneset type: {{metadata.geneSetType}}</mat-list-item>
          <mat-list-item> Query geneset genes: {{metadata.genesCount}}</mat-list-item>
          <mat-list-item> Query geneset genes in DREIMT: {{metadata.universeGenesCount}}
          </mat-list-item>

          <mat-list-item *ngIf="metadata.downGenesCount"> Query down genes:
            {{metadata.downGenesCount}}
          </mat-list-item>
          <mat-list-item *ngIf="metadata.downUniverseGenesCount"> Query down genes in
            DREIMT: {{metadata.downUniverseGenesCount}}
          </mat-list-item>
        </mat-list>
      </mat-expansion-panel>
    </mat-card-content>
  </mat-card>

  <app-cmap-gene-set-signature-results-graph [dataSource]="dataSource"></app-cmap-gene-set-signature-results-graph>
  <app-cmap-gene-set-signature-results-summary [dataSource]="dataSource"></app-cmap-gene-set-signature-results-summary>
  <app-cmap-gene-set-signature-results-table [metadata]="metadata"
                                             [dataSource]="dataSource"></app-cmap-gene-set-signature-results-table>
</div>
